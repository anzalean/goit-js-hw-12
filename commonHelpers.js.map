{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '45205333-a930dfeeeabac87545cb9c1b9';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\n\nexport async function fetchImages(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: PER_PAGE\n      }\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error('Failed to fetch images');\n  }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst galleryElement = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\n\nexport function renderImages(images) {\n  const markup = images.map(\n    ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <div class=\"photo-card\">\n        <a href=\"${largeImageURL}\" class=\"gallery-link\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\"><b>Likes</b> ${likes}</p>\n          <p class=\"info-item\"><b>Views</b> ${views}</p>\n          <p class=\"info-item\"><b>Comments</b> ${comments}</p>\n          <p class=\"info-item\"><b>Downloads</b> ${downloads}</p>\n        </div>\n      </div>\n    `\n  ).join('');\n  galleryElement.insertAdjacentHTML('beforeend', markup);\n  const lightbox = new SimpleLightbox('.gallery a');\n  lightbox.refresh();\n}\n\nexport function clearImages() {\n  galleryElement.innerHTML = '';\n}\n\nexport function showNoResultsMessage() {\n  iziToast.error({\n    title: 'Error',\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n    theme: 'dark',\n    position: 'topRight',\n    backgroundColor: '#EF4040'\n  });\n}\n\nexport function showLoadingSpinner() {\n  document.querySelector('.loader').classList.remove('hidden');\n}\n\nexport function hideLoadingSpinner() {\n  document.querySelector('.loader').classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreButton.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreButton.classList.add('hidden');\n}\n\nexport function showEndOfResultsMessage() {\n  iziToast.info({\n    title: 'Info',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    theme: 'dark',\n    position: 'topRight',\n    backgroundColor: '#2196F3'\n  });\n}\n\nexport function smoothScroll() {\n  const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { renderImages, clearImages, showNoResultsMessage, showLoadingSpinner, hideLoadingSpinner, showLoadMoreButton, hideLoadMoreButton, showEndOfResultsMessage, smoothScroll } from './js/render-functions';\nimport iziToast from 'izitoast';\n\nconst PER_PAGE = 15;\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\ndocument.querySelector('#search-form').addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  query = event.target.elements.searchQuery.value.trim();\n  if (query === '') {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search query!',\n      theme: 'dark',\n      position: 'topRight',\n      backgroundColor: '#FFA000'\n    });\n    return;\n  }\n\n  page = 1;\n  clearImages();\n  hideLoadMoreButton();\n  showLoadingSpinner();\n\n  try {\n    const data = await fetchImages(query, page);\n    hideLoadingSpinner();\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      showNoResultsMessage();\n    } else {\n      renderImages(data.hits);\n      if (totalHits > PER_PAGE) {\n        showLoadMoreButton();\n      }\n    }\n  } catch (error) {\n    hideLoadingSpinner();\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n      theme: 'dark',\n      position: 'topRight',\n      backgroundColor: '#EF4040'\n    });\n  }\n});\n\ndocument.querySelector('.load-more').addEventListener('click', async () => {\n  page += 1;\n  showLoadingSpinner();\n\n  try {\n    const data = await fetchImages(query, page);\n    hideLoadingSpinner();\n    renderImages(data.hits);\n    smoothScroll();\n    if (page * PER_PAGE >= totalHits) {\n      hideLoadMoreButton();\n      showEndOfResultsMessage();\n    }\n  } catch (error) {\n    hideLoadingSpinner();\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n      theme: 'dark',\n      position: 'topRight',\n      backgroundColor: '#EF4040'\n    });\n  }\n});\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","axios","galleryElement","loadMoreButton","renderImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearImages","showNoResultsMessage","iziToast","showLoadingSpinner","hideLoadingSpinner","showLoadMoreButton","hideLoadMoreButton","showEndOfResultsMessage","smoothScroll","cardHeight","totalHits","event","data"],"mappings":"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"}